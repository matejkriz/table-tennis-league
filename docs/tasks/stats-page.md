Prompt:
I want to add new page to this app /stats, that will present only Ranking table (on top) and Match history (below) without any edit options. The purpose of this page is to be able to present just the results. Use tanstack router. Keep the main page unchanged (on main page, there is an option to edit match history, keep that there, only hide it on stats page).


Plan:

# Add Stats Page for Presentation View

## Current State

- Single-page React app without routing
- `RankingList` component is already pure/presentational
- `MatchHistory` component includes a delete button that needs to be made optional

## Changes Required

### 1. Install TanStack Router

Add TanStack Router packages for type-safe file-based routing:

```bash
yarn add @tanstack/react-router
yarn add -D @tanstack/router-plugin
```

### 2. Configure Vite Plugin

Update [vite.config.ts](vite.config.ts) to add the TanStack Router plugin:

```typescript
import { TanStackRouterVite } from "@tanstack/router-plugin/vite";

export default defineConfig({
  plugins: [
    TanStackRouterVite(),  // Add before react()
    tailwindcss(),
    react(),
    // ...rest
  ],
});
```

### 3. Modify MatchHistory Component

Add a `readonly` prop to [src/components/MatchHistory.tsx](src/components/MatchHistory.tsx) to conditionally hide the delete button:

```typescript
interface MatchHistoryProps {
  readonly matches: ReadonlyArray<MatchSummary>;
  readonly readonly?: boolean;  // new prop
}
```

When `readonly={true}`, the delete button will be hidden. The main page keeps the edit functionality unchanged.

### 4. Create Route Files (File-Based Routing)

**`src/routes/__root.tsx`** - Root layout with EvoluProvider and Suspense:

```tsx
import { createRootRoute, Outlet } from "@tanstack/react-router";
import { Suspense } from "react";
import { EvoluProvider, evolu } from "../evolu/client";

export const Route = createRootRoute({
  component: () => (
    <EvoluProvider value={evolu}>
      <Suspense fallback={<div className="p-6 text-center text-black/40">Loading...</div>}>
        <Outlet />
      </Suspense>
    </EvoluProvider>
  ),
});
```

**`src/routes/index.tsx`** - Main dashboard (move existing LeagueDashboard logic here):

```tsx
import { createFileRoute } from "@tanstack/react-router";
// Move LeagueDashboard component here

export const Route = createFileRoute("/")({
  component: LeagueDashboard,
});
```

**`src/routes/stats.tsx`** - Stats page (read-only view):

```tsx
import { createFileRoute } from "@tanstack/react-router";
import { MatchHistory } from "../components/MatchHistory";
import { RankingList } from "../components/RankingList";
import { useLeagueData } from "../hooks/useLeagueData";

const StatsPage = () => {
  const { players, ranking, matches } = useLeagueData();
  
  return (
    <div className="mx-auto w-full max-w-4xl px-4 py-6 sm:px-6 sm:py-8">
      {/* Header, Ranking section, Match history with readonly={true} */}
    </div>
  );
};

export const Route = createFileRoute("/stats")({
  component: StatsPage,
});
```

### 5. Update Entry Point

Update [src/main.tsx](src/main.tsx) to use the router:

```tsx
import { RouterProvider, createRouter } from "@tanstack/react-router";
import { routeTree } from "./routeTree.gen";

const router = createRouter({ routeTree });

declare module "@tanstack/react-router" {
  interface Register {
    router: typeof router;
  }
}

ReactDOM.createRoot(document.getElementById("root")!).render(
  <RouterProvider router={router} />
);
```

### 6. Clean Up

[src/App.tsx](src/App.tsx) can be removed - the router and route files now handle everything.

### 7. Update Vercel Configuration

Modify [vercel.json](vercel.json) to handle client-side routing (SPA fallback):

```json
{
  "framework": "vite",
  "outputDirectory": "dist",
  "rewrites": [
    { "source": "/(.*)", "destination": "/" }
  ]
}
```

## File Structure After Changes

```
src/
├── main.tsx                   (modified - router entry)
├── routeTree.gen.ts           (auto-generated by TanStack plugin)
├── components/
│   ├── MatchHistory.tsx       (modified - add readonly prop)
│   ├── RankingList.tsx        (unchanged)
│   └── ...
├── routes/
│   ├── __root.tsx             (new - root layout with providers)
│   ├── index.tsx              (new - main dashboard, moved from App.tsx)
│   └── stats.tsx              (new - stats page)
└── ...
```

## Result

- `/` - Full dashboard with all editing capabilities (unchanged behavior, including match history editing)
- `/stats` - Read-only view showing only Ranking and Match history (no delete buttons)